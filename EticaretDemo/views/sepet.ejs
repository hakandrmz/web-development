<%- include("header") -%>

<body>
	<section class="colored-section" id="title">

		<div class="container-fluid">

			<!-- Nav Bar -->

			<nav class="navbar navbar-expand-lg navbar-dark">

				<a class="navbar-brand" href="/">hakazon</a>

				<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarTogglerDemo02">
					<span class="navbar-toggler-icon"></span>
				</button>

				<div class="collapse navbar-collapse" id="navbarTogglerDemo02">

					<ul class="navbar-nav ml-auto">
						<li class="nav-item">
							<a class="nav-link" href="./sepet">Sepetim</a>
						</li>
						<li class="nav-item">
							<a class="nav-link" href="./hesabim">Hesabım</a>
						</li>
					</ul>

				</div>
			</nav>

		</div>
	</section>


	<style>
		@import "compass/css3";

		/* I wanted to go with a mobile first approach, but it actually lead to more verbose CSS in this case, so I've gone web first. Can't always force things... Side note: I know that this style of nesting in SASS doesn't result in the most performance efficient CSS code... but on the OCD/organizational side, I like it. So for CodePen purposes, CSS selector performance be damned. */
		/* Global settings */
		/* Global "table" column settings */
		.product-image {
			float: left;
			width: 20%;
		}

		.product-details {
			float: left;
			width: 37%;
		}

		.product-price {
			float: left;
			width: 12%;
		}

		.product-quantity {
			float: left;
			width: 10%;
		}

		.onaybutonu {
			float: right;
		}

		.product-removal {
			float: left;
			width: 9%;
		}

		.product-line-price {
			float: left;
			width: 12%;
			text-align: right;
		}

		/* This is used as the traditional .clearfix class */
		.group:before,
		.shopping-cart:before,
		.column-labels:before,
		.product:before,
		.totals-item:before,
		.group:after,
		.shopping-cart:after,
		.column-labels:after,
		.product:after,
		.totals-item:after {
			content: "";
			display: table;
		}

		.group:after,
		.shopping-cart:after,
		.column-labels:after,
		.product:after,
		.totals-item:after {
			clear: both;
		}

		.group,
		.shopping-cart,
		.column-labels,
		.product,
		.totals-item {
			zoom: 1;
		}

		/* Apply clearfix in a few places */
		/* Apply dollar signs */
		.product .product-price:before,
		.product .product-line-price:before,
		.totals-value:before {
			content: "₺";
		}

		/* Body/Header stuff */
		body {
			font-family: "HelveticaNeue-Light", "Helvetica Neue Light", "Helvetica Neue", Helvetica, Arial, sans-serif;
			font-weight: 100;
		}

		h1 {
			font-weight: 100;
		}

		label {
			color: black;
		}

		.shopping-cart {
			margin-top: -45px;
		}

		/* Column headers */
		.column-labels label {
			padding-bottom: 15px;
			margin-bottom: 15px;
			border-bottom: 1px solid #eee;
		}

		.column-labels .product-image,
		.column-labels .product-details,
		.column-labels .product-removal {
			text-indent: -9999px;
		}

		/* Product entries */
		.product {
			margin-bottom: 20px;
			padding-bottom: 10px;
			border-bottom: 1px solid #eee;
		}

		.product .product-image {
			text-align: center;
		}

		.product .product-image img {
			width: 100px;
		}

		.product .product-details .product-title {
			margin-right: 20px;
			font-family: "HelveticaNeue-Medium", "Helvetica Neue Medium";
		}

		.product .product-details .product-description {
			margin: 5px 20px 5px 0;
			line-height: 1.4em;
		}

		.product .product-quantity input {
			width: 40px;
		}

		.product .remove-product {
			border: 0;
			padding: 4px 8px;
			background-color: #c66;
			color: #fff;
			font-family: "HelveticaNeue-Medium", "Helvetica Neue Medium";
			font-size: 12px;
			border-radius: 3px;
		}

		.product .remove-product:hover {
			background-color: #a44;
		}

		/* Totals section */
		.totals .totals-item {
			float: right;
			clear: both;
			width: 100%;
			margin-bottom: 10px;
		}

		.totals .totals-item label {
			float: left;
			clear: both;
			width: 79%;
			text-align: right;
		}

		.shopping-cart {
			margin: 0% 5%;
		}

		.sepetim {
			margin-left: 7%;


		}

		.totals .totals-item .totals-value {
			float: right;
			width: 21%;
			text-align: right;
		}

		.totals .totals-item-total {
			font-family: "HelveticaNeue-Medium", "Helvetica Neue Medium";
		}



		.remove-product {
			min-height: 50px;
			width: 120%;
			border-radius: 50%;
			border-color: transparent;
			background-color: #A683E3;
			color: #fff;
			font-size: 30px;
			padding-bottom: 6px;
			border-width: 0;
		}

		/* Make adjustments for tablet */
		@media screen and (max-width: 650px) {
			.shopping-cart {
				margin: 0;
				padding-top: 20px;
				border-top: 1px solid #eee;
			}

			.column-labels {
				display: none;
			}

			.product-image {
				float: right;
				width: auto;
			}

			.product-image img {
				margin: 0 0 10px 10px;
			}

			.product-details {
				float: none;
				margin-bottom: 10px;
				width: auto;
			}

			.product-price {
				clear: both;
				width: 70px;
			}

			.product-quantity {
				width: 100px;
			}

			.product-quantity input {
				margin-left: 20px;
			}

			.product-quantity:before {
				content: "x";
			}

			.product-removal {
				width: auto;
			}

			.product-line-price {
				float: right;
				width: 70px;
			}
		}

		/* Make more adjustments for phone */
		@media screen and (max-width: 350px) {
			.product-removal {
				float: right;
			}

			.product-line-price {
				float: right;
				clear: left;
				width: auto;
				margin-top: 10px;
			}

			.product .product-line-price:before {
				content: "Item Total: $";
			}

			.totals .totals-item label {
				width: 60%;
			}

			.totals .totals-item .totals-value {
				width: 40%;
			}
		}

		.checkout:hover {
			background-color: #494;
		}

		.checkout {
			float: right;
			min-height: 50px;
			width: 20%;
			border-radius: 3px;
			border-color: transparent;
			background-color: #c66;
			color: #fff;
			font-size: 30px;
			padding-bottom: 6px;
			border-width: 0;
		}
	</style>
	<h1 class="sepetim">Sepetim</h1>


	<div class="shopping-cart">
		<div class="column-labels">
			<label class="product-image">Image</label>
			<label class="product-details">Product</label>
			<label class="product-price">Fiyat</label>
			<label class="product-quantity">Adet</label>
			<label class="product-removal">Kaldır</label>
			<label class="product-line-price">Toplam</label>
		</div>

		<%  sepets.forEach(function(sepet){ %>
		<div class="product">
			<div class="product-image">
				<img src="https://ibb.co/6bx6P2K">
			</div>
			<div class="product-details">
				<div class="product-title"><%=sepet.urunAd%></div>
				<p class="product-description"><%=sepet.urunAciklama%></p>
			</div>
			<div class="product-price"><%=sepet.urunFiyati%></div>
			<div class="product-quantity">
				<input type="number" value="1" min="1">
			</div>
			<form action="/sepettenkaldir" method="post">
				<input type="hidden" name="itemId" value="<%=sepet._id%>">
				<div class="product-removal">
					<button type="submit" class="remove-product">
						Kaldır
					</button>
				</div>
			</form>
			<div class="product-line-price"><%=sepet.urunFiyati%></div>
		</div>
		<% }) %>

		<form action="/odemeyegec" method="post">
			<div class="totals">
				<div class="totals-item">
					<label>Toplam</label>
					<div class="totals-value" name="cart-subtotal" id="cart-subtotal">0</div>
				</div>
				<div class="totals-item">
					<label>Vergi (%8)</label>
					<div class="totals-value" name="cart-tax" id="cart-tax">0</div>
				</div>
				<div class="totals-item">
					<label>Kargo Ücreti</label>
					<div class="totals-value" name="cart-shipping" id="cart-shipping">0</div>
				</div>
				<div class="totals-item totals-item-total">
					<label>Genel Toplam</label>
					<div class="totals-value" id="cart-total">0</div>
				</div>
			</div>
			<input type="hidden" id="cart-alttoplam" name="subtotal" value="">
			<input type="hidden" id="cart-vergi" name="tax" value="">
			<input type="hidden" id="cart-kargo" name="shipping" value="">
			<input type="hidden" id="cart-toplam" name="total" value="">
			<div class="onaybutonu">
				<input type="checkbox" id="checkbox" name="checkbox" value="0" required>
				<label> Sepeti Onayla</label><br>
			</div>
			<script>
				$('#checkbox').prop('checked', false);
			</script>
			<button type="submit" class="checkout">Ödemeye Geç</button>
		</form>
	</div>

	<script src="sepet.js"></script>
	<script>
		$('#checkbox').change(function () {
			document.getElementById("cart-alttoplam").value = document.getElementById("cart-subtotal").innerHTML;
			document.getElementById("cart-vergi").value = document.getElementById("cart-tax").innerHTML;
			document.getElementById("cart-kargo").value = document.getElementById("cart-shipping").innerHTML;
			document.getElementById("cart-toplam").value = document.getElementById("cart-total").innerHTML;

			console.log(document.getElementById("cart-alttoplam").value);
			console.log(document.getElementById("cart-kargo").value);
			console.log(document.getElementById("cart-vergi").value);
			console.log(document.getElementById("cart-toplam").value);
		});
	</script>
</body>


<%- include("footer") -%>